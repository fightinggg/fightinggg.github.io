<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="æŸæŸçš„ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  
  <link rel="stylesheet" type="text/css" href="/yearn/./style/main.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>CICD</title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?awwssw1snsnsnn1ndndnndnd99j";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/123456.js","daovoice");daovoice('init',{app_id: "123456"});daovoice('update');
  </script>
  
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/yearn/">Believe it</a>
  <a class="face-img" href="/yearn/">
    <img src="https://tva3.sinaimg.cn/crop.0.0.200.200.180/005Kc3C1jw8f2uep0hhkvj305k05k3yk.jpg">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    CICD
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2021-04-16T11:17:00.000Z" itemprop="datePublished">2021-04-16</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2021-04-16T11:17:00.000Z" itemprop="dateUpdated">2021-04-16</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <div><a href="/next/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">next</a><a href="/hexonext/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">hexonext</a><a href="/butterfly/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">butterfly</a><a href="/volantis/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">volantis</a><a href="/yearn/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">yearn</a><a href="/yilia/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">yilia</a><a href="/shoka/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">shoka</a><a href="/indigo/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">indigo</a><a href="/apollo/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">apollo</a><a href="/landscape/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">landscape</a><a href="/cactus/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">cactus</a><a href="/matery/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">matery</a><a href="/icarus/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">icarus</a><a href="/fluid/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">fluid</a><a href="/material/QRNM0C.html" style="border-bottom: 0px;border-bottom: 0px;
            background: #4FC921;
            color: white;
            border-radius: 5px;
            padding: 2px 6px 2px 6px;
            margin: 2px 6px 2px 6px;
            text-decoration: none;
            float: left;
            ">material</a><div style="clear: both;"></div></div>

<h1 id="CI-x2F-CD"><a href="#CI-x2F-CD" class="headerlink" title="CI&#x2F;CD"></a>CI&#x2F;CD</h1><p>æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²</p>
<h1 id="Continuous-Integration"><a href="#Continuous-Integration" class="headerlink" title="Continuous Integration"></a>Continuous Integration</h1><p>æŒç»­é›†æˆï¼Œå³æ¯å½“å¼€å‘è€…å¯¹ä»£ç è¿›è¡Œpushï¼Œä¼šè‡ªåŠ¨åŒ–æ„å»ºæµæ°´çº¿ï¼Œåœ¨æµæ°´çº¿ä¸­è¿›è¡Œè‡ªåŠ¨åŒ–å†’çƒŸæµ‹è¯•ï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ï¼Œå½“æµ‹è¯•é€šè¿‡ï¼Œå¯ä»¥é€šè¿‡é‚®ä»¶çš„æ–¹å¼å‘ŠçŸ¥å¼€å‘è€…ã€‚</p>
<h1 id="Continuous-Delivery"><a href="#Continuous-Delivery" class="headerlink" title="Continuous Delivery"></a>Continuous Delivery</h1><p> æŒç»­äº¤ä»˜ï¼Œå½“CIé€šè¿‡ä»¥åï¼Œæµæ°´çº¿ä¼šè‡ªåŠ¨åŒ–åœ°å°†ä»£ç è¿›è¡Œæ„å»ºï¼Œå¹¶éƒ¨ç½²åˆ°ç±»çœŸå®ç¯å¢ƒä¸­ï¼ˆå³æµ‹è¯•ç¯å¢ƒã€é¢„å‘æ­¥ç¯å¢ƒï¼‰å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æ‰‹åŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
<h1 id="Continuous-Deployment"><a href="#Continuous-Deployment" class="headerlink" title="Continuous Deployment"></a>Continuous Deployment</h1><p>æŒç»­éƒ¨ç½²ï¼Œå½“æŒç»­äº¤ä»˜ä¹‹åï¼Œä»£ç å³å¯è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p>
<span id="more"></span>



<h1 id="How-To-Do-it"><a href="#How-To-Do-it" class="headerlink" title="How To Do it"></a>How To Do it</h1><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>é¦–å…ˆåœ¨Githubåˆ›å»ºé¡¹ç›®ã€‚</p>
<p>æˆ‘ä»¬æ‹¿ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://github.com/fightinggg/polinoj-backend">spring booté¡¹ç›®</a>æ¥è¯´, ç›´æ¥è¿›å…¥åˆ°<a target="_blank" rel="noopener" href="https://github.com/fightinggg/polinoj-backend/blob/master/Dockerfile">Dockerfile</a>ä¸‹, æ¥ä¸‹æ¥ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªDockerfileï¼Œç¬¬ä¸€ä¸ªFROMè¡¨ç¤ºç”¨mavenä½œä¸ºåŸºç¡€é•œåƒï¼Œ<code>COPY . /app</code>æŠŠæ•´ä¸ªé¡¹ç›®æºä»£ç ç§»åŠ¨åˆ°&#x2F;appä¸‹ï¼Œç„¶å<code>WORKDIR /app</code>è¿›å…¥åˆ°ç›®å½•&#x2F;appä¸‹ï¼Œæœ€åæ‰§è¡Œpackageï¼Œæˆ‘è¿™é‡Œä½¿ç”¨<code>-Dmaven.test.skip=true</code>è·³è¿‡äº†æµ‹è¯•,æ‰€ä»¥è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„CIã€‚è‡³æ­¤ç¼–è¯‘äº§ç‰©æ„å»ºå®Œæˆã€‚</p>
<p>ç„¶åå¯åŠ¨ç¬¬äºŒä¸ªé•œåƒæ„å»ºä»»åŠ¡ï¼Œä»openjdk-8-jreå¼€å§‹æ„å»ºï¼Œä½¿ç”¨<code>java -jar /app/main.jar</code>ä½œä¸ºå®¹å™¨å¯åŠ¨æŒ‡ä»¤ã€‚äºæ˜¯è¿è¡Œé•œåƒæ„å»ºå®Œæˆã€‚</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.8</span>.<span class="number">1</span>-openjdk-<span class="number">8</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn package -Dmaven.test.skip=<span class="literal">true</span> -q</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jre</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=0 /app/start-polinoj/target/*.jar /app/main.jar</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_PARAM <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> <span class="string">&quot;java&quot;</span> <span class="string">&quot;-jar&quot;</span> <span class="string">&quot;/app/main.jar&quot;</span> <span class="variable">$JAVA_PARAM</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Docker-Hub-Hook"><a href="#Docker-Hub-Hook" class="headerlink" title="Docker Hub Hook"></a>Docker Hub Hook</h2><p>ç„¶åæˆ‘ä»¬å»Dockerhubåˆ›å»ºé¡¹ç›®ï¼Œå¹¶å°†å…¶ä¸­çš„SOURCE REPOISITORYæŒ‡å‘æˆ‘ä»¬çš„GITHUBé¡¹ç›®ã€‚</p>
<p><img src='/image-2021-04-16-19.12.34.033.png'></img></p>
<h2 id="Enjoy-It"><a href="#Enjoy-It" class="headerlink" title="Enjoy It"></a>Enjoy It</h2><p>æ¯å½“æˆ‘ä»¬å¯¹è¿™ä¸ªé¡¹ç›®çš„masteråˆ†æ”¯æ‰§è¡Œpushï¼Œåˆ™dockerhubä¸Šè‡ªåŠ¨å¯åŠ¨æ„å»ºä»»åŠ¡ã€‚</p>
<p><img src='/image-2021-04-16-19.15.53.680.png'></img></p>
<h2 id="å¦‚ä½•CD"><a href="#å¦‚ä½•CD" class="headerlink" title="å¦‚ä½•CD"></a>å¦‚ä½•CD</h2><p>dockerhubä¸Šæœ‰äº†é•œåƒï¼Œæˆ‘ä¹ˆè¦æ‰‹åŠ¨å»éƒ¨ç½²å—ï¼ŸNOï¼ NOï¼ NOï¼</p>
<p>å…ˆå®‰è£…dockerï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-d \</span><br><span class="line">--name watchtower \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">-m 50M --memory-swap=1024M \</span><br><span class="line">v2tec/watchtower</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Watchtower is an application that will monitor your running Docker containers and watch for changes to the images that those containers were originally started from. If watchtower detects that an image has changed, it will automatically restart the container using the new image.</p>
</blockquote>
<p>è‡³æ­¤CDå®Œæˆã€‚</p>

      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="https://888.com/index.html" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: '8888a8888',
    clientSecret: '8888886666666',
    repo: 'xxxx.github.io',
    owner: 'admin',
    admin: ['admin'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false
  })

  gitalk.render('comments');
</script>


        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a target="_blank" rel="noopener" href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a target="_blank" rel="noopener" href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2013-2018 æŸæŸçš„åšå®¢ äº¬ICPå¤‡xxxxxxå·</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—® https://hufangyun.com ï¼Œå›´è§‚å°çŒ¿å¤§åœ£çš„åšå®¢(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥ï¼\n,\næœ¬åšå®¢ä½¿ç”¨ %cHexo%c æ­å»ºï¼Œåšå®¢ä¸»é¢˜ä¸ºå°çŒ¿å¤§åœ£å¼€å‘çš„ %chexo-themes-yearn%c ~~~ ğŸ‰ğŸ‰ğŸ‰ \n\næºç  https://github.com/Youthink/hexo-themes-yearn \n\nå¦‚æœå–œæ¬¢å¯ä»¥ star æ”¯æŒä¸€ä¸‹ â¤ï¸~\n,\næ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹åšå®¢ï¼\n,https://static.hufangyun.com/blog-url-qrcode-180-180.png,\n æƒ³çŸ¥é“è¿™ä¸ªæ•ˆæœå¦‚ä½•å®ç°çš„ï¼Ÿåšå®¢å†…æœç´¢ console å½©è›‹ ğŸš€ ï¼\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/yearn/./js/main.js"></script>

  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
